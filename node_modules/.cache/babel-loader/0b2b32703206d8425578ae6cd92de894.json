{"ast":null,"code":"import _defineProperty from \"D:\\\\Users\\\\musyil\\\\reportengine\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"D:\\\\Users\\\\musyil\\\\reportengine\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\Users\\\\musyil\\\\reportengine\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"D:\\\\Users\\\\musyil\\\\reportengine\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"D:\\\\Users\\\\musyil\\\\reportengine\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"D:\\\\Users\\\\musyil\\\\reportengine\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"D:\\\\Users\\\\musyil\\\\reportengine\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"D:\\\\Users\\\\musyil\\\\reportengine\\\\src\\\\components\\\\SearchPage.js\";\nimport React, { Component } from 'react'; //import './App.css';\n\nimport { Container } from 'react-bootstrap';\nimport { Button } from 'react-bootstrap';\nimport { Row } from 'react-bootstrap';\nimport BootstrapTable from 'react-bootstrap-table-next';\nimport filterFactory, { textFilter, dateFilter } from 'react-bootstrap-table2-filter';\nimport paginationFactory from 'react-bootstrap-table2-paginator';\nimport 'react-bootstrap-table2-filter/dist/react-bootstrap-table2-filter.min.css';\nimport cellEditFactory, { Type } from 'react-bootstrap-table2-editor';\n\nvar axios = require('axios');\n\nvar SearchPage =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(SearchPage, _Component);\n\n  function SearchPage(props) {\n    var _ref, _ref2;\n\n    var _this;\n\n    _classCallCheck(this, SearchPage);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(SearchPage).call(this, props));\n    _this.state = {\n      fieldcolumns: [{\n        dataField: 'pname',\n        text: 'Problem Name',\n        headerAlign: '',\n        headerStyle: {\n          backgroundColor: '#00ff00',\n          width: '100px'\n        },\n        hidden: false\n      }, {\n        dataField: 'field1',\n        text: '',\n        headerAlign: '',\n        headerStyle: {\n          backgroundColor: '#00ff00',\n          width: '100px'\n        },\n        hidden: false\n      }, {\n        dataField: 'field2',\n        text: '',\n        headerAlign: '',\n        headerStyle: {\n          backgroundColor: '#00ff00',\n          width: '100px'\n        },\n        hidden: false\n      }, {\n        dataField: 'field3',\n        text: '',\n        headerAlign: '',\n        headerStyle: {\n          backgroundColor: '#00ff00',\n          width: '100px'\n        },\n        hidden: false\n      }, {\n        dataField: 'field4',\n        text: '',\n        headerAlign: '',\n        headerStyle: {\n          backgroundColor: '#00ff00',\n          width: '100px'\n        },\n        hidden: false\n      }, {\n        dataField: 'field5',\n        text: '',\n        headerAlign: '',\n        headerStyle: {\n          backgroundColor: '#00ff00',\n          width: '100px'\n        },\n        hidden: false\n      }, {\n        dataField: 'field6',\n        text: '',\n        headerAlign: '',\n        headerStyle: {\n          backgroundColor: '#00ff00',\n          width: '100px'\n        },\n        hidden: false\n      }, {\n        dataField: 'field7',\n        text: '',\n        headerAlign: '',\n        headerStyle: {\n          backgroundColor: '#00ff00',\n          width: '100px'\n        },\n        hidden: false\n      }, {\n        dataField: 'field8',\n        text: '',\n        headerAlign: '',\n        headerStyle: {\n          backgroundColor: '#00ff00',\n          width: '100px'\n        },\n        hidden: false\n      }, {\n        dataField: 'field9',\n        text: '',\n        headerAlign: '',\n        headerStyle: {\n          backgroundColor: '#00ff00',\n          width: '100px'\n        },\n        hidden: false\n      }],\n      fielddata: [],\n      columns: [{\n        dataField: 'generalinfo_id',\n        text: 'Info     ID',\n        headerAlign: 'center',\n        sort: true,\n        filter: textFilter(),\n        editor: {\n          type: Type.TEXTAREA\n        },\n        headerStyle: {\n          backgroundColor: '#81c784',\n          width: '100px'\n        }\n      }, {\n        dataField: 'fromcompletedby',\n        text: 'Completed By',\n        headerAlign: 'center',\n        filter: textFilter(),\n        editor: {\n          type: Type.TEXTAREA\n        },\n        headerStyle: {\n          backgroundColor: '#81c784',\n          width: '100px'\n        }\n      }, (_ref = {\n        dataField: 'gpsproduct',\n        text: 'Product',\n        headerAlign: 'center',\n        filter: textFilter(),\n        editor: {\n          type: Type.TEXTAREA\n        }\n      }, _defineProperty(_ref, \"editor\", {\n        type: Type.SELECT,\n        options: [{\n          value: 'E',\n          label: 'E'\n        }]\n      }), _defineProperty(_ref, \"headerStyle\", {\n        backgroundColor: '#81c784',\n        width: '100px'\n      }), _ref), (_ref2 = {\n        dataField: 'startdate',\n        text: 'Date',\n        headerAlign: 'center',\n        filter: dateFilter(),\n        editable: false,\n        editor: {\n          type: Type.TEXTAREA\n        }\n      }, _defineProperty(_ref2, \"editor\", {\n        type: Type.DATE\n      }), _defineProperty(_ref2, \"headerStyle\", {\n        backgroundColor: '#81c784',\n        width: '100px'\n      }), _ref2), {\n        dataField: 'caseid',\n        text: 'Case        ID',\n        sort: true,\n        filter: textFilter(),\n        editor: {\n          type: Type.TEXTAREA\n        },\n        editable: false,\n        headerFormatter: _this.caseIDFormatter,\n        headerAlign: 'center',\n        headerStyle: {\n          backgroundColor: '#81c784',\n          width: '100px'\n        }\n      }, {\n        dataField: 'customername',\n        text: 'Customer Name',\n        headerAlign: 'center',\n        filter: textFilter(),\n        editor: {\n          type: Type.TEXTAREA\n        },\n        headerStyle: {\n          backgroundColor: '#81c784',\n          width: '100px'\n        }\n      }, {\n        dataField: 'description',\n        text: 'Description',\n        headerAlign: 'center',\n        filter: textFilter(),\n        editor: {\n          type: Type.TEXTAREA\n        },\n        formatter: _this.descriptionFormatter,\n        headerStyle: {\n          backgroundColor: '#81c784',\n          width: '250px'\n        }\n      }, {\n        dataField: 'pname',\n        text: 'Problem     Name',\n        headerAlign: 'center',\n        filter: textFilter(),\n        editor: {\n          type: Type.SELECT,\n          options: [{\n            value: 'E',\n            label: 'E'\n          }]\n        },\n        headerStyle: {\n          backgroundColor: '#81c784',\n          width: '100px'\n        }\n      }],\n      selectedRows: [],\n      generalinfo: []\n    };\n    _this.handleSelected = _this.handleSelected.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.saveChanges = _this.saveChanges.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.deleteRows = _this.deleteRows.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.updateProblem = _this.updateProblem.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(SearchPage, [{\n    key: \"caseIDFormatter\",\n    value: function caseIDFormatter(column, colIndex, _ref3) {\n      var sortElement = _ref3.sortElement,\n          filterElement = _ref3.filterElement;\n      return React.createElement(\"div\", {\n        style: {\n          display: 'flex',\n          flexDirection: 'column'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216\n        },\n        __self: this\n      }, filterElement, column.text, sortElement);\n    }\n  }, {\n    key: \"descriptionFormatter\",\n    value: function descriptionFormatter(cell, row) {\n      var h = row.description.length > 300 ? '200px' : '';\n      return React.createElement(\"div\", {\n        style: {\n          height: h,\n          width: '400px',\n          overflowY: 'scroll',\n          overflowX: 'hidden'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226\n        },\n        __self: this\n      }, row.description);\n    }\n  }, {\n    key: \"handleSelected\",\n    value: function handleSelected() {\n      console.log(this.state.generalinfo.dataField);\n    }\n  }, {\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      this.assignGeneralInfo();\n      this.assingProductBox();\n      this.assignProblemBox();\n    }\n  }, {\n    key: \"deleteRows\",\n    value: function deleteRows() {\n      var l = this.state.selectedRows.length;\n\n      if (l > 0) {\n        var r = l > 1 ? \"reports\" : \"report\";\n\n        if (window.confirm(\"Are you sure to delete \" + l + \" \" + r + \" ?\")) {\n          var _iteratorNormalCompletion = true;\n          var _didIteratorError = false;\n          var _iteratorError = undefined;\n\n          try {\n            for (var _iterator = this.state.selectedRows[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n              var row = _step.value;\n              this.deleteRow(row.generalinfo_id, row.caseid);\n            }\n          } catch (err) {\n            _didIteratorError = true;\n            _iteratorError = err;\n          } finally {\n            try {\n              if (!_iteratorNormalCompletion && _iterator.return != null) {\n                _iterator.return();\n              }\n            } finally {\n              if (_didIteratorError) {\n                throw _iteratorError;\n              }\n            }\n          }\n        } else {}\n      } else {\n        alert(\"No reports selected!\");\n      }\n    }\n  }, {\n    key: \"deleteRow\",\n    value: function deleteRow(generalinfo_id, caseid) {\n      var _this2 = this;\n\n      var axios = require('axios');\n\n      axios.post(\"http://localhost:4000/generalinfo/remove?generalinfo_id=\".concat(generalinfo_id), {\n        headers: {\n          \"Content-Type\": \"text/plain\"\n        },\n        method: 'POST',\n        data: \"delete sent\"\n      }).then(function (response) {\n        // handle success\n        console.log(response.data);\n      }).catch(function (error) {\n        // handle error\n        console.log(error);\n      }).then(function () {\n        _this2.assignGeneralInfo();\n      });\n      axios.post(\"http://localhost:4000/fieldcontents/remove?caseid=\".concat(caseid), {\n        headers: {\n          \"Content-Type\": \"text/plain\"\n        },\n        method: 'POST',\n        data: \"delete sent\"\n      }).then(function (response) {\n        // handle success\n        console.log(response.data);\n      }).catch(function (error) {\n        // handle error\n        console.log(error);\n      }).then(function () {});\n    }\n  }, {\n    key: \"saveChanges\",\n    value: function saveChanges(generalinfo_id, fromcompletedby, gpsproduct, startdate, caseid, customername, description, pname) {\n      axios.post(\"http://localhost:4000/generalinfo/update?generalinfo_id=\".concat(generalinfo_id, \"&startdate=\").concat(startdate, \"&caseid=\").concat(caseid, \"\\n      &gpsproduct=\").concat(gpsproduct, \"&fromcompletedby=\").concat(fromcompletedby, \"&customername=\").concat(customername, \"&pname=\").concat(pname), {\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        method: 'POST',\n        data: {\n          description: description\n        }\n      }).then(function (response) {\n        // handle success\n        console.log(response.data);\n      }).catch(function (error) {\n        // handle error\n        console.log(error);\n      }).then(function () {});\n      alert(\"changes saved\");\n    }\n  }, {\n    key: \"assignGeneralInfo\",\n    value: function assignGeneralInfo() {\n      var _this3 = this;\n\n      fetch('http://localhost:4000/generalinfo').then(function (response) {\n        return response.json();\n      }).then(function (_ref4) {\n        var data = _ref4.data;\n\n        _this3.setState({\n          generalinfo: data\n        });\n      }).catch(function (err) {\n        return console.error();\n      });\n    }\n  }, {\n    key: \"assingProductBox\",\n    value: function assingProductBox() {\n      var _this4 = this;\n\n      var products = [];\n      var opt = [];\n      fetch('http://localhost:4000/products').then(function (response) {\n        return response.json();\n      }).then(function (_ref5) {\n        var data = _ref5.data;\n        var _iteratorNormalCompletion2 = true;\n        var _didIteratorError2 = false;\n        var _iteratorError2 = undefined;\n\n        try {\n          for (var _iterator2 = data[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n            var el = _step2.value;\n            products.push(el.productname);\n          }\n        } catch (err) {\n          _didIteratorError2 = true;\n          _iteratorError2 = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion2 && _iterator2.return != null) {\n              _iterator2.return();\n            }\n          } finally {\n            if (_didIteratorError2) {\n              throw _iteratorError2;\n            }\n          }\n        }\n      }).then(function () {\n        for (var k = 0; k < products.length; k++) {\n          opt.push({\n            value: products[k],\n            label: products[k]\n          });\n        }\n\n        var copy = _this4.state.columns.slice();\n\n        copy[2].editor.options = opt;\n\n        _this4.setState({\n          columns: copy\n        });\n\n        console.log(opt[0]);\n      }).catch(function (err) {\n        return console.error();\n      });\n    }\n  }, {\n    key: \"assignProblemBox\",\n    value: function assignProblemBox() {\n      var _this5 = this;\n\n      var problems = [];\n      var opt = [];\n      fetch('http://localhost:4000/problems').then(function (response) {\n        return response.json();\n      }).then(function (_ref6) {\n        var data = _ref6.data;\n        var _iteratorNormalCompletion3 = true;\n        var _didIteratorError3 = false;\n        var _iteratorError3 = undefined;\n\n        try {\n          for (var _iterator3 = data[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n            var el = _step3.value;\n            problems.push(el.problemname);\n            console.log(el.problemname);\n          }\n        } catch (err) {\n          _didIteratorError3 = true;\n          _iteratorError3 = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion3 && _iterator3.return != null) {\n              _iterator3.return();\n            }\n          } finally {\n            if (_didIteratorError3) {\n              throw _iteratorError3;\n            }\n          }\n        }\n      }).then(function () {\n        for (var k = 0; k < problems.length; k++) {\n          opt.push({\n            value: problems[k],\n            label: problems[k]\n          });\n        }\n\n        var copy = _this5.state.columns.slice();\n\n        copy[7].editor.options = opt;\n\n        _this5.setState({\n          columns: copy\n        });\n      }).catch(function (err) {\n        return console.error();\n      });\n    }\n  }, {\n    key: \"arrangeExpand\",\n    value: function arrangeExpand(pname) {\n      var _this6 = this;\n\n      fetch(\"http://localhost:4000/problemfields?pname=\".concat(pname)).then(function (response) {\n        return response.json();\n      }).then(function (_ref7) {\n        var data = _ref7.data;\n        var sortedValues = Object.values(data[0]);\n\n        var copiedfieldcolumns = _this6.state.fieldcolumns.slice();\n\n        for (var i = 1; i < sortedValues.length; i++) {\n          if (sortedValues[i] === null) {\n            copiedfieldcolumns[i].hidden = true;\n          } else {\n            copiedfieldcolumns[i].hidden = false;\n            copiedfieldcolumns[i].text = sortedValues[i];\n          }\n        }\n\n        _this6.setState({\n          fieldcolumns: copiedfieldcolumns\n        });\n      }).catch(function (err) {\n        return console.error();\n      });\n    }\n  }, {\n    key: \"setFieldContents\",\n    value: function setFieldContents(caseid) {\n      var _this7 = this;\n\n      fetch(\"http://localhost:4000/fieldcontents?caseid=\".concat(caseid)).then(function (response) {\n        return response.json();\n      }).then(function (_ref8) {\n        var data = _ref8.data;\n\n        _this7.setState({\n          fielddata: data\n        });\n\n        _this7.arrangeExpand(data[0].pname);\n      }).catch(function (err) {\n        return console.error();\n      });\n    }\n  }, {\n    key: \"updateProblem\",\n    value: function updateProblem(newPname, caseid) {\n      var _this8 = this;\n\n      var newFields = [];\n      var newContents = [];\n      fetch(\"http://localhost:4000/problemfields?pname=\".concat(newPname), {\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        method: 'GET',\n        data: \"delete sent\"\n      }).then(function (response) {\n        return response.json();\n      }).then(function (_ref9) {\n        var data = _ref9.data;\n        var requestedProblemField = Object.values(data[0]);\n\n        for (var i = 1; i < requestedProblemField.length; i++) {\n          if (requestedProblemField[i] != null) {\n            newFields[i - 1] = requestedProblemField[i];\n          }\n        }\n\n        console.log(requestedProblemField + \"  requested bla bla\");\n      }).then(function () {\n        for (var i = 0; i < newFields.length; i++) {\n          newContents[i] = window.prompt(\"Please enter new problem's subfields\", newFields[i]);\n        }\n      }).then(function () {\n        for (var i = 0; i < newFields.length; i++) {\n          _this8.sendProblemToServer(\"field\".concat(i + 1), newContents[i], caseid, newPname);\n        }\n      }).catch(function (error) {\n        // handle error\n        console.log(error);\n      }).then(function () {\n        console.log(newFields);\n      });\n    }\n  }, {\n    key: \"sendProblemToServer\",\n    value: function sendProblemToServer(field, content, caseid, newPname) {\n      axios.post(\"http://localhost:4000/fieldcontents/update?field=\".concat(field, \"&content=\").concat(content, \"&caseid=\").concat(caseid, \"&pname=\").concat(newPname), {\n        headers: {\n          \"Content-Type\": \"text/plain\"\n        },\n        method: 'POST',\n        data: \"problem sent\"\n      }).then(function (response) {\n        // handle success\n        console.log(response.data);\n      }).catch(function (error) {\n        // handle error\n        console.log(error);\n      }).then(function () {});\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this9 = this;\n\n      var expandRow = {\n        renderer: function renderer(row) {\n          return React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 480\n            },\n            __self: this\n          }, React.createElement(Container, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 482\n            },\n            __self: this\n          }, React.createElement(BootstrapTable, {\n            keyField: \"caseid\",\n            data: _this9.state.fielddata,\n            columns: _this9.state.fieldcolumns,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 483\n            },\n            __self: this\n          })));\n        }\n      };\n      var selectRow = {\n        mode: 'checkbox',\n        clickToSelect: true,\n        bgColor: function bgColor(row, rowIndex) {\n          return rowIndex % 2 == 0 ? '#00BFFF' : '#00FFFF';\n        },\n        clickToExpand: true,\n        clickToEdit: true,\n        onSelect: function onSelect(row, isSelect, rowIndex, e) {\n          console.log(row);\n\n          if (isSelect === true) {\n            _this9.state.selectedRows.push(row);\n\n            _this9.setFieldContents(row.caseid);\n          }\n\n          if (isSelect === false) {\n            _this9.state.selectedRows.splice(_this9.state.selectedRows.indexOf(row), 1);\n          }\n        },\n        onSelectAll: function onSelectAll(isSelect, rows, e) {\n          if (isSelect === true) {\n            for (var i = 0; i < rows.length; i++) {\n              _this9.state.selectedRows.push(rows[i]);\n\n              _this9.setFieldContents(rows[i].caseid);\n            }\n          }\n\n          if (isSelect === false) {\n            for (var _i = 0; _i < rows.length; _i++) {\n              _this9.state.selectedRows.splice(_this9.state.selectedRows.indexOf(rows[_i]), 1);\n            }\n          }\n\n          console.log(rows);\n        }\n      };\n      var cellEdit = {\n        mode: 'click'\n      };\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 537\n        },\n        __self: this\n      }, React.createElement(Container, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 538\n        },\n        __self: this\n      }, React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 540\n        },\n        __self: this\n      }, React.createElement(Button, {\n        onClick: this.deleteRows,\n        variant: \"danger\",\n        size: \"lg\",\n        active: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 541\n        },\n        __self: this\n      }, \"Delete Selected Rows\")), React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 547\n        },\n        __self: this\n      }), React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 548\n        },\n        __self: this\n      }, React.createElement(BootstrapTable, {\n        keyField: \"generalinfo_id\",\n        filter: filterFactory(),\n        selectRow: selectRow,\n        data: this.state.generalinfo,\n        columns: this.state.columns,\n        striped: true,\n        hover: true,\n        condensed: true,\n        expandRow: expandRow,\n        cellEdit: cellEditFactory({\n          mode: 'dbclick',\n          blurToSave: true,\n          afterSaveCell: function afterSaveCell(oldValue, newValue, row, column) {\n            if (oldValue != newValue) {\n              _this9.saveChanges(row.generalinfo_id, row.fromcompletedby, row.gpsproduct, row.startdate, row.caseid, row.customername, row.description, row.pname);\n\n              if (column.dataField === 'pname') {\n                _this9.updateProblem(newValue, row.caseid);\n              }\n            }\n          }\n        }),\n        pagination: paginationFactory(),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 549\n        },\n        __self: this\n      }))));\n    }\n  }]);\n\n  return SearchPage;\n}(Component);\n\nexport default SearchPage;","map":{"version":3,"sources":["D:\\Users\\musyil\\reportengine\\src\\components\\SearchPage.js"],"names":["React","Component","Container","Button","Row","BootstrapTable","filterFactory","textFilter","dateFilter","paginationFactory","cellEditFactory","Type","axios","require","SearchPage","props","state","fieldcolumns","dataField","text","headerAlign","headerStyle","backgroundColor","width","hidden","fielddata","columns","sort","filter","editor","type","TEXTAREA","SELECT","options","value","label","editable","DATE","headerFormatter","caseIDFormatter","formatter","descriptionFormatter","selectedRows","generalinfo","handleSelected","bind","saveChanges","deleteRows","updateProblem","column","colIndex","sortElement","filterElement","display","flexDirection","cell","row","h","description","length","height","overflowY","overflowX","console","log","assignGeneralInfo","assingProductBox","assignProblemBox","l","r","window","confirm","deleteRow","generalinfo_id","caseid","alert","post","headers","method","data","then","response","catch","error","fromcompletedby","gpsproduct","startdate","customername","pname","fetch","json","setState","err","products","opt","el","push","productname","k","copy","slice","problems","problemname","sortedValues","Object","values","copiedfieldcolumns","i","arrangeExpand","newPname","newFields","newContents","requestedProblemField","prompt","sendProblemToServer","field","content","expandRow","renderer","selectRow","mode","clickToSelect","bgColor","rowIndex","clickToExpand","clickToEdit","onSelect","isSelect","e","setFieldContents","splice","indexOf","onSelectAll","rows","cellEdit","blurToSave","afterSaveCell","oldValue","newValue"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\n//import './App.css';\r\nimport { Container } from 'react-bootstrap';\r\nimport { Button } from 'react-bootstrap';\r\nimport { Row } from 'react-bootstrap';\r\n\r\nimport BootstrapTable from 'react-bootstrap-table-next';\r\nimport filterFactory, { textFilter, dateFilter } from 'react-bootstrap-table2-filter';\r\n\r\nimport paginationFactory from 'react-bootstrap-table2-paginator';\r\nimport 'react-bootstrap-table2-filter/dist/react-bootstrap-table2-filter.min.css'\r\n\r\n\r\nimport cellEditFactory, { Type } from 'react-bootstrap-table2-editor';\r\nconst axios = require('axios');\r\nclass SearchPage extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      fieldcolumns: [\r\n        {\r\n          dataField: 'pname',\r\n          text: 'Problem Name',\r\n          headerAlign: '',\r\n          headerStyle: { backgroundColor: '#00ff00', width: '100px' },\r\n          hidden: false\r\n        },\r\n        {\r\n          dataField: 'field1',\r\n          text: '',\r\n          headerAlign: '',\r\n          headerStyle: { backgroundColor: '#00ff00', width: '100px' },\r\n          hidden: false\r\n        },\r\n        {\r\n          dataField: 'field2',\r\n          text: '',\r\n          headerAlign: '',\r\n          headerStyle: { backgroundColor: '#00ff00', width: '100px' },\r\n          hidden: false\r\n        },\r\n        {\r\n          dataField: 'field3',\r\n          text: '',\r\n          headerAlign: '',\r\n          headerStyle: { backgroundColor: '#00ff00', width: '100px' },\r\n          hidden: false\r\n        },\r\n        {\r\n          dataField: 'field4',\r\n          text: '',\r\n          headerAlign: '',\r\n          headerStyle: { backgroundColor: '#00ff00', width: '100px' },\r\n          hidden: false\r\n        },\r\n        {\r\n          dataField: 'field5',\r\n          text: '',\r\n          headerAlign: '',\r\n          headerStyle: { backgroundColor: '#00ff00', width: '100px' },\r\n          hidden: false\r\n        },\r\n        {\r\n          dataField: 'field6',\r\n          text: '',\r\n          headerAlign: '',\r\n          headerStyle: { backgroundColor: '#00ff00', width: '100px' },\r\n          hidden: false\r\n        },\r\n        {\r\n          dataField: 'field7',\r\n          text: '',\r\n          headerAlign: '',\r\n          headerStyle: { backgroundColor: '#00ff00', width: '100px' },\r\n          hidden: false\r\n        },\r\n        {\r\n          dataField: 'field8',\r\n          text: '',\r\n          headerAlign: '',\r\n          headerStyle: { backgroundColor: '#00ff00', width: '100px' },\r\n          hidden: false\r\n        },\r\n        {\r\n          dataField: 'field9',\r\n          text: '',\r\n          headerAlign: '',\r\n          headerStyle: { backgroundColor: '#00ff00', width: '100px' },\r\n          hidden: false\r\n        }\r\n      ],\r\n      fielddata: [],\r\n      columns: [{\r\n        dataField: 'generalinfo_id',\r\n        text: 'Info     ID',\r\n        headerAlign: 'center',\r\n        sort: true,\r\n        filter: textFilter(),\r\n        editor: {\r\n          type: Type.TEXTAREA\r\n        },\r\n        headerStyle: { backgroundColor: '#81c784', width: '100px' }\r\n      }, {\r\n        dataField: 'fromcompletedby',\r\n        text: 'Completed By',\r\n        headerAlign: 'center',\r\n        filter: textFilter(),\r\n        editor: {\r\n          type: Type.TEXTAREA\r\n        },\r\n        headerStyle: { backgroundColor: '#81c784', width: '100px' }\r\n      }, {\r\n        dataField: 'gpsproduct',\r\n        text: 'Product',\r\n        headerAlign: 'center',\r\n        filter: textFilter(),\r\n        editor: {\r\n          type: Type.TEXTAREA\r\n        },\r\n        editor: {\r\n          type: Type.SELECT,\r\n          options: [{\r\n\r\n            value: 'E',\r\n            label: 'E'\r\n          }]\r\n        },\r\n        headerStyle: { backgroundColor: '#81c784', width: '100px' }\r\n      },\r\n      {\r\n        dataField: 'startdate',\r\n        text: 'Date',\r\n        headerAlign: 'center',\r\n        filter: dateFilter(),\r\n        editable: false,\r\n        editor: {\r\n          type: Type.TEXTAREA\r\n        },\r\n        editor: {\r\n          type: Type.DATE\r\n        },\r\n        headerStyle: { backgroundColor: '#81c784', width: '100px' }\r\n      },\r\n      {\r\n        dataField: 'caseid',\r\n        text: 'Case        ID',\r\n        sort: true,\r\n        filter: textFilter(),\r\n        editor: {\r\n          type: Type.TEXTAREA\r\n        },\r\n        editable: false,\r\n        headerFormatter: this.caseIDFormatter,\r\n        headerAlign: 'center',\r\n        headerStyle: { backgroundColor: '#81c784', width: '100px' }\r\n      },\r\n      {\r\n        dataField: 'customername',\r\n        text: 'Customer Name',\r\n        headerAlign: 'center',\r\n        filter: textFilter(),\r\n        editor: {\r\n          type: Type.TEXTAREA\r\n        },\r\n        headerStyle: { backgroundColor: '#81c784', width: '100px' }\r\n      },\r\n      {\r\n        dataField: 'description',\r\n        text: 'Description',\r\n        headerAlign: 'center',\r\n        filter: textFilter(),\r\n        editor: {\r\n          type: Type.TEXTAREA\r\n        },\r\n        formatter: this.descriptionFormatter,\r\n        \r\n        headerStyle: { backgroundColor: '#81c784', width: '250px'  }\r\n\r\n      },\r\n      {\r\n        dataField: 'pname',\r\n        text: 'Problem     Name',\r\n        headerAlign: 'center',\r\n        filter: textFilter(),\r\n        editor: {\r\n          type: Type.SELECT,\r\n          options: [{\r\n\r\n            value: 'E',\r\n            label: 'E'\r\n          }]\r\n        },\r\n        headerStyle: { backgroundColor: '#81c784', width: '100px' }\r\n      }\r\n\r\n\r\n      ],\r\n\r\n      selectedRows: [],\r\n\r\n      generalinfo: [\r\n\r\n      ],\r\n\r\n\r\n    }\r\n    this.handleSelected = this.handleSelected.bind(this);\r\n    this.saveChanges = this.saveChanges.bind(this);\r\n    this.deleteRows = this.deleteRows.bind(this);\r\n    this.updateProblem = this.updateProblem.bind(this);\r\n  }\r\n\r\n\r\n  caseIDFormatter(column, colIndex, { sortElement, filterElement }) {\r\n    return (\r\n      <div style={{ display: 'flex', flexDirection: 'column' }}>\r\n        {filterElement}\r\n        {column.text}\r\n        {sortElement}\r\n      </div>\r\n    );\r\n  }\r\ndescriptionFormatter(cell,row){\r\n  const h = (row.description.length > 300) ? '200px' : ''\r\n  return(\r\n  <div style= {{height: h ,width: '400px',overflowY: 'scroll', overflowX: 'hidden'}}>{row.description}</div>\r\n  );\r\n}\r\n\r\n  handleSelected() {\r\n    console.log(this.state.generalinfo.dataField);\r\n  }\r\n\r\n  componentWillMount() {\r\n    this.assignGeneralInfo();\r\n    this.assingProductBox();\r\n    this.assignProblemBox();\r\n  }\r\n\r\n  deleteRows() {\r\n    let l = this.state.selectedRows.length;\r\n    if(l>0){\r\n      let r = (l > 1) ? \"reports\" : \"report\";\r\n      if (window.confirm(\"Are you sure to delete \" + l + \" \" + r + \" ?\")) {\r\n        for (let row of this.state.selectedRows) {\r\n          this.deleteRow(row.generalinfo_id,row.caseid);\r\n        }\r\n      } else {\r\n    \r\n      }\r\n    }\r\n  else{\r\n    alert(\"No reports selected!\");\r\n  }\r\n  \r\n\r\n  }\r\n  deleteRow(generalinfo_id,caseid) {\r\n    const axios = require('axios');\r\n    axios.post(`http://localhost:4000/generalinfo/remove?generalinfo_id=${generalinfo_id}`, {\r\n      headers: { \"Content-Type\": \"text/plain\" },\r\n      method: 'POST',\r\n      data: \"delete sent\"\r\n    })\r\n      .then(function (response) {\r\n        // handle success\r\n        console.log(response.data);\r\n      })\r\n      .catch(function (error) {\r\n        // handle error\r\n        console.log(error);\r\n      }).then(()=>{\r\n        this.assignGeneralInfo();\r\n      })\r\n      \r\n      axios.post(`http://localhost:4000/fieldcontents/remove?caseid=${caseid}`, {\r\n        headers: { \"Content-Type\": \"text/plain\" },\r\n        method: 'POST',\r\n        data: \"delete sent\"\r\n      })\r\n        .then(function (response) {\r\n          // handle success\r\n          console.log(response.data);\r\n        })\r\n        .catch(function (error) {\r\n          // handle error\r\n          console.log(error);\r\n        })\r\n        .then(function () {\r\n  \r\n  \r\n        });\r\n\r\n\r\n  }\r\n  saveChanges(generalinfo_id, fromcompletedby, gpsproduct, startdate, caseid, customername, description, pname) {\r\n\r\n    axios.post(`http://localhost:4000/generalinfo/update?generalinfo_id=${generalinfo_id}&startdate=${startdate}&caseid=${caseid}\r\n      &gpsproduct=${gpsproduct}&fromcompletedby=${fromcompletedby}&customername=${customername}&pname=${pname}`, {\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        method: 'POST',\r\n        data: {\r\n          description: description\r\n        }\r\n      })\r\n      .then(function (response) {\r\n        // handle success\r\n        console.log(response.data);\r\n      })\r\n      .catch(function (error) {\r\n        // handle error\r\n        console.log(error);\r\n      })\r\n      .then(function () {\r\n\r\n\r\n      });\r\n    alert(\"changes saved\");\r\n\r\n  }\r\n  assignGeneralInfo() {\r\n\r\n    fetch('http://localhost:4000/generalinfo')\r\n      .then(response => response.json())\r\n      .then(({ data }) => {\r\n        this.setState({ generalinfo: data })\r\n\r\n      })\r\n      .catch(err => console.error()\r\n      )\r\n  }\r\n  assingProductBox() {\r\n    let products = [];\r\n    let opt = [];\r\n    fetch('http://localhost:4000/products')\r\n      .then(response => response.json())\r\n      .then(({ data }) => {\r\n        for (var el of data) {\r\n          products.push(el.productname);\r\n\r\n        }\r\n\r\n      })\r\n      .then(() => {\r\n        for (var k = 0; k < products.length; k++) {\r\n          opt.push({ value: products[k], label: products[k] });\r\n        }\r\n        var copy = this.state.columns.slice();\r\n        copy[2].editor.options = opt;\r\n        this.setState({ columns: copy });\r\n        console.log(opt[0]);\r\n      })\r\n      .catch(err => console.error()\r\n      )\r\n\r\n\r\n  }\r\n  assignProblemBox() {\r\n    let problems = [];\r\n    let opt = [];\r\n    fetch('http://localhost:4000/problems')\r\n      .then(response => response.json())\r\n      .then(({ data }) => {\r\n        for (var el of data) {\r\n          problems.push(el.problemname);\r\n          console.log(el.problemname);\r\n        }\r\n\r\n      })\r\n      .then(() => {\r\n        for (var k = 0; k < problems.length; k++) {\r\n          opt.push({ value: problems[k], label: problems[k] });\r\n        }\r\n        var copy = this.state.columns.slice();\r\n        copy[7].editor.options = opt;\r\n        this.setState({ columns: copy });\r\n      })\r\n      .catch(err => console.error()\r\n      )\r\n\r\n\r\n  }\r\n  arrangeExpand(pname) {\r\n    fetch(`http://localhost:4000/problemfields?pname=${pname}`)\r\n      .then(response => response.json())\r\n      .then(({ data }) => {\r\n        var sortedValues = Object.values(data[0]);\r\n        var copiedfieldcolumns = this.state.fieldcolumns.slice();\r\n\r\n\r\n\r\n        for (let i = 1; i < sortedValues.length; i++) {\r\n\r\n          if (sortedValues[i] === null) {\r\n            copiedfieldcolumns[i].hidden = true;\r\n\r\n          }\r\n          else {\r\n            copiedfieldcolumns[i].hidden = false;\r\n            copiedfieldcolumns[i].text = sortedValues[i];\r\n\r\n          }\r\n        }\r\n        this.setState({ fieldcolumns: copiedfieldcolumns });\r\n      })\r\n      .catch(err => console.error()\r\n      )\r\n  }\r\n\r\n  setFieldContents(caseid) {\r\n    fetch(`http://localhost:4000/fieldcontents?caseid=${caseid}`)\r\n      .then(response => response.json())\r\n      .then(({ data }) => {\r\n        this.setState({ fielddata: data });\r\n        this.arrangeExpand(data[0].pname)\r\n      \r\n      })\r\n      .catch(err => console.error()\r\n      )\r\n  }\r\n  updateProblem(newPname,caseid){\r\n    var newFields = [];\r\n    var newContents = [];\r\n    fetch(`http://localhost:4000/problemfields?pname=${newPname}`, {\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      method: 'GET',\r\n      data: \"delete sent\"\r\n    })\r\n      .then( response => response.json())\r\n      .then(({ data }) => {\r\n        var requestedProblemField = Object.values(data[0]);\r\n        for(var i=1; i< requestedProblemField.length; i++){\r\n          if(requestedProblemField[i]!= null){\r\n            newFields[i-1] = requestedProblemField[i];\r\n          }\r\n        }\r\n        console.log(requestedProblemField + \"  requested bla bla\");\r\n      })\r\n      .then(()=>{\r\n        for(var i=0; i< newFields.length; i++){\r\n          newContents[i] = window.prompt(\"Please enter new problem's subfields\",newFields[i]);\r\n        }\r\n      }).then(()=>{\r\n        for(var i=0; i< newFields.length; i++){\r\n          this.sendProblemToServer(`field${i+1}`,newContents[i],caseid,newPname);\r\n        }\r\n      })\r\n      .catch(function (error) {\r\n        // handle error\r\n        console.log(error);\r\n      })\r\n      .then(function () { \r\n        console.log(newFields);\r\n\r\n      });\r\n  }\r\n  sendProblemToServer(field,content,caseid,newPname){\r\n    axios.post(`http://localhost:4000/fieldcontents/update?field=${field}&content=${content}&caseid=${caseid}&pname=${newPname}`, {\r\n      headers: { \"Content-Type\": \"text/plain\" },\r\n      method: 'POST',\r\n      data: \"problem sent\"\r\n    })\r\n      .then(function (response) {\r\n        // handle success\r\n        console.log(response.data);\r\n      })\r\n      .catch(function (error) {\r\n        // handle error\r\n        console.log(error);\r\n      })\r\n      .then(function () {\r\n\r\n\r\n      });\r\n  }\r\n  render() {\r\n    const expandRow = {\r\n      renderer: row => (\r\n\r\n        <div>\r\n\r\n          <Container>\r\n            <BootstrapTable keyField='caseid' data={this.state.fielddata} columns={this.state.fieldcolumns} />\r\n          </Container>\r\n\r\n        </div>\r\n      )\r\n    };\r\n\r\n    const selectRow = {\r\n      mode: 'checkbox',\r\n      clickToSelect: true,\r\n      bgColor: (row, rowIndex) => (rowIndex % 2 == 0 ? '#00BFFF' : '#00FFFF'),\r\n      clickToExpand: true,\r\n      clickToEdit: true,\r\n      onSelect: (row, isSelect, rowIndex, e) => {\r\n        console.log(row);\r\n        if (isSelect === true) {\r\n          this.state.selectedRows.push(row);\r\n\r\n\r\n          this.setFieldContents(row.caseid);\r\n        }\r\n        if (isSelect === false) {\r\n          this.state.selectedRows.splice(this.state.selectedRows.indexOf(row), 1);\r\n       \r\n        }\r\n\r\n\r\n      },\r\n      onSelectAll: (isSelect, rows, e) => {\r\n        if (isSelect === true) {\r\n          for (let i = 0; i < rows.length; i++) {\r\n            this.state.selectedRows.push(rows[i]);\r\n            \r\n\r\n            this.setFieldContents(rows[i].caseid);\r\n          }\r\n        }\r\n        if (isSelect === false) {\r\n          for (let i = 0; i < rows.length; i++) {\r\n            this.state.selectedRows.splice(this.state.selectedRows.indexOf(rows[i]), 1);\r\n       \r\n          }\r\n        }\r\n        console.log(rows);\r\n      }\r\n    };\r\n    const cellEdit = {\r\n      mode: 'click'\r\n    };\r\n\r\n\r\n\r\n    return (\r\n\r\n      <div>\r\n        <Container>\r\n\r\n          <Row>\r\n            <Button onClick={this.deleteRows} variant=\"danger\" size=\"lg\" active >\r\n              Delete Selected Rows\r\n         </Button>\r\n\r\n\r\n          </Row>\r\n          <hr></hr>\r\n          <Row>\r\n            <BootstrapTable keyField='generalinfo_id' filter={filterFactory()} selectRow={selectRow}\r\n\r\n              data={this.state.generalinfo} columns={this.state.columns}\r\n              striped hover condensed\r\n              expandRow={expandRow}\r\n              cellEdit={cellEditFactory({\r\n                mode: 'dbclick', blurToSave: true,\r\n                afterSaveCell: (oldValue, newValue, row, column) => {\r\n             \r\n                  if(oldValue != newValue){\r\n                    this.saveChanges(row.generalinfo_id, row.fromcompletedby, row.gpsproduct, row.startdate, row.caseid, row.customername, row.description, row.pname)\r\n                    if(column.dataField === 'pname'){\r\n                      this.updateProblem(newValue,row.caseid);\r\n                    }\r\n                  }\r\n                }\r\n              })}\r\n              pagination={paginationFactory()}\r\n            >\r\n\r\n\r\n            </BootstrapTable>\r\n\r\n          </Row>\r\n\r\n        </Container>\r\n\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n\r\nexport default SearchPage;\r\n"]},"metadata":{},"sourceType":"module"}